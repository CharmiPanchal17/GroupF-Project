{"ast":null,"code":"import{createContext,useState,useEffect}from'react';import{FetchUser}from'../services/userService';import{jsx as _jsx}from\"react/jsx-runtime\";const authContext=/*#__PURE__*/createContext();const AuthProvider=_ref=>{let{children}=_ref;const[isAuthenticated,setIsAuthenticated]=useState(false);const[userId,setUserId]=useState('');const[userLoginData,setUserLoginData]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const token=localStorage.getItem(\"token\");if(token){try{const payload=JSON.parse(atob(token.split('.')[1]));setUserId(payload.user_id);}catch(error){console.error(\"Invalid token:\",error);}}setIsAuthenticated(!!token);},[]);useEffect(()=>{if(userId){setLoading(true);FetchUser(userId,setUserLoginData).then(()=>setLoading(false));}},[userId]);useEffect(()=>{if(userId){FetchUser(userId,setUserLoginData);}},[userId]);console.log(userLoginData);return/*#__PURE__*/_jsx(authContext.Provider,{value:{isAuthenticated,userId,loading,userLoginData,setIsAuthenticated,setUserLoginData},children:children});};export{authContext,AuthProvider};","map":{"version":3,"names":["createContext","useState","useEffect","FetchUser","jsx","_jsx","authContext","AuthProvider","_ref","children","isAuthenticated","setIsAuthenticated","userId","setUserId","userLoginData","setUserLoginData","loading","setLoading","token","localStorage","getItem","payload","JSON","parse","atob","split","user_id","error","console","then","log","Provider","value"],"sources":["C:/Users/antho/Desktop/GroupF-Project/FRONTEND/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useState, useEffect } from 'react'\r\nimport { FetchUser } from '../services/userService'\r\n\r\nconst authContext = createContext()\r\n\r\nconst AuthProvider = ({ children }) => {\r\n\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\r\n  const [userId, setUserId] = useState('')\r\n  const [userLoginData, setUserLoginData] = useState([])\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      try {\r\n        const payload = JSON.parse(atob(token.split('.')[1]));\r\n        setUserId(payload.user_id);\r\n      } catch (error) {\r\n        console.error(\"Invalid token:\", error);\r\n      }\r\n    }\r\n    setIsAuthenticated(!!token);\r\n  }, []);\r\n\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      setLoading(true);\r\n      FetchUser(userId, setUserLoginData).then(() => setLoading(false));\r\n    }\r\n  }, [userId]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (userId) {\r\n      FetchUser(userId, setUserLoginData);\r\n    }\r\n  }, [userId]);\r\n\r\n  console.log(userLoginData)\r\n\r\n  return (\r\n    <authContext.Provider\r\n      value={{\r\n        isAuthenticated,\r\n        userId,\r\n        loading,\r\n        userLoginData,\r\n        setIsAuthenticated,\r\n        setUserLoginData,\r\n      }}\r\n    >\r\n      {children}\r\n    </authContext.Provider>\r\n  )\r\n}\r\n\r\nexport { authContext, AuthProvider }"],"mappings":"AAAA,OAASA,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC1D,OAASC,SAAS,KAAQ,yBAAyB,QAAAC,GAAA,IAAAC,IAAA,yBAEnD,KAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAEnC,KAAM,CAAAO,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAEhC,KAAM,CAACE,eAAe,CAAEC,kBAAkB,CAAC,CAAGV,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACW,MAAM,CAAEC,SAAS,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACa,aAAa,CAAEC,gBAAgB,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAACe,OAAO,CAAEC,UAAU,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgB,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACT,GAAI,CACF,KAAM,CAAAG,OAAO,CAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACN,KAAK,CAACO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACrDZ,SAAS,CAACQ,OAAO,CAACK,OAAO,CAAC,CAC5B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACxC,CACF,CACAhB,kBAAkB,CAAC,CAAC,CAACO,KAAK,CAAC,CAC7B,CAAC,CAAE,EAAE,CAAC,CAGNhB,SAAS,CAAC,IAAM,CACd,GAAIU,MAAM,CAAE,CACVK,UAAU,CAAC,IAAI,CAAC,CAChBd,SAAS,CAACS,MAAM,CAAEG,gBAAgB,CAAC,CAACc,IAAI,CAAC,IAAMZ,UAAU,CAAC,KAAK,CAAC,CAAC,CACnE,CACF,CAAC,CAAE,CAACL,MAAM,CAAC,CAAC,CAGZV,SAAS,CAAC,IAAM,CACd,GAAIU,MAAM,CAAE,CACVT,SAAS,CAACS,MAAM,CAAEG,gBAAgB,CAAC,CACrC,CACF,CAAC,CAAE,CAACH,MAAM,CAAC,CAAC,CAEZgB,OAAO,CAACE,GAAG,CAAChB,aAAa,CAAC,CAE1B,mBACET,IAAA,CAACC,WAAW,CAACyB,QAAQ,EACnBC,KAAK,CAAE,CACLtB,eAAe,CACfE,MAAM,CACNI,OAAO,CACPF,aAAa,CACbH,kBAAkB,CAClBI,gBACF,CAAE,CAAAN,QAAA,CAEDA,QAAQ,CACW,CAAC,CAE3B,CAAC,CAED,OAASH,WAAW,CAAEC,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}